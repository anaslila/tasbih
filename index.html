<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6cccbd">
    <meta name="description" content="Tasbih Tally Counter - Digital dhikr counter with mechanical flip display">
    <title>Tasbih Tally Counter v3.0</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/7113/7113227.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/7113/7113227.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Theme Circle Animation -->
    <div class="theme-circle" id="themeCircle"></div>
    
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <button class="nav-btn" id="menuBtn" onclick="event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/>
            </svg>
        </button>
        
        <h1 class="app-title">Tasbih Counter</h1>
        
        <button class="nav-btn" id="themeToggle" onclick="event.stopPropagation()">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
            </svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
        </button>
    </nav>
    
    <!-- Side Menu -->
    <div class="side-menu" id="sideMenu">
        <div class="menu-header">
            <img src="https://cdn-icons-png.flaticon.com/512/7113/7113227.png" alt="Logo" class="menu-logo">
            <h2>Menu</h2>
            <button class="close-menu" id="closeMenu">Ã—</button>
        </div>
        
        <div class="menu-content">
            <button class="menu-item active" data-view="counter">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                </svg>
                <span>Counter</span>
            </button>
            
            <button class="menu-item" data-view="counters">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
                </svg>
                <span>My Counters</span>
            </button>
            
            <button class="menu-item" data-view="history">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 3v5h5M3.05 13A9 9 0 1 0 3 8"/>
                </svg>
                <span>History</span>
            </button>
            
            <button class="menu-item" data-view="stats">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="14"/>
                </svg>
                <span>Statistics</span>
            </button>
            
            <button class="menu-item" data-view="settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6"/>
                    <path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24m0-16.97-4.24 4.24m-5.66 5.66L4.93 19.07"/>
                </svg>
                <span>Settings</span>
            </button>
            
            <button class="menu-item" data-view="names">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 20h9M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                </svg>
                <span>99 Names of Allah</span>
            </button>
            
            <button class="menu-item" data-view="qibla">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
                </svg>
                <span>Qibla Finder</span>
            </button>
        </div>
    </div>
    
    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>
    
    <!-- Main Container -->
    <div class="container" id="tapArea">
        
        <!-- Counter View -->
        <div class="view active" id="counterView">
            <div class="counter-card">
                <div class="counter-label" id="counterLabel">General Counter</div>
                
                <img src="https://cdn-icons-png.flaticon.com/512/7113/7113227.png" alt="Tasbih Logo" class="logo">
                
                <!-- Mechanical Counter Display -->
                <div class="mechanical-counter" id="mechanicalCounter">
                    <div class="digit-slot" data-position="3">
                        <div class="digit-flipper">
                            <div class="digit-top">0</div>
                            <div class="digit-bottom">0</div>
                        </div>
                    </div>
                    <div class="digit-slot" data-position="2">
                        <div class="digit-flipper">
                            <div class="digit-top">0</div>
                            <div class="digit-bottom">0</div>
                        </div>
                    </div>
                    <div class="digit-slot" data-position="1">
                        <div class="digit-flipper">
                            <div class="digit-top">0</div>
                            <div class="digit-bottom">0</div>
                        </div>
                    </div>
                    <div class="digit-slot" data-position="0">
                        <div class="digit-flipper">
                            <div class="digit-top">0</div>
                            <div class="digit-bottom">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="lap-counter" id="lapCounter">
                    <span class="lap-text">Lap</span>
                    <span class="lap-value" id="lapValue">0</span>
                </div>
                
                <select class="tasbih-select" id="tasbihSelect" onclick="event.stopPropagation()">
                    <option value="Subhanallah">Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù - Subhanallah</option>
                    <option value="Alhamdulillah">Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù - Alhamdulillah</option>
                    <option value="Allahu Akbar">Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù - Allahu Akbar</option>
                    <option value="La ilaha illallah">Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù - La ilaha illallah</option>
                    <option value="Astaghfirullah">Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù - Astaghfirullah</option>
                    <option value="SubhanAllahi wa bihamdih">Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù - SubhanAllahi wa bihamdih</option>
                    <option value="Allahu la ilaha illa Huwa">Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙ - Allahu la ilaha illa Huwa</option>
                    <option value="La hawla wa la quwwata">Ù„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù - La hawla wa la quwwata</option>
                    <option value="Bismillah">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù - Bismillah</option>
                    <option value="Allahumma salli">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ - Allahumma salli</option>
                    <option value="Hasbi Allahu">Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù - Hasbi Allahu</option>
                    <option value="La ilaha illa anta">Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†Ù’ØªÙ - La ilaha illa anta</option>
                    <option value="Custom">Custom Dhikr</option>
                </select>
                
                <input type="text" class="custom-dhikr" id="customDhikr" placeholder="Enter your custom dhikr" style="display: none;">
                
                <div class="target-section" onclick="event.stopPropagation()">
                    <label class="target-label">Target:</label>
                    <div class="target-buttons">
                        <button class="target-btn active" data-target="11">11</button>
                        <button class="target-btn" data-target="33">33</button>
                        <button class="target-btn" data-target="66">66</button>
                        <button class="target-btn" data-target="99">99</button>
                        <button class="target-btn" data-target="custom">Custom</button>
                    </div>
                    <input type="number" class="custom-target" id="customTarget" placeholder="Enter custom target" style="display: none;">
                </div>
                
                <div class="stats-section" onclick="event.stopPropagation()">
                    <div class="stat-item">
                        <span class="stat-label">Progress</span>
                        <span class="stat-value animated-text" id="progressStat">0/11</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Avg Speed</span>
                        <span class="stat-value animated-text" id="speedStat">0/min</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Time</span>
                        <span class="stat-value animated-text" id="timeStat">00:00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ETC</span>
                        <span class="stat-value animated-text" id="etcStat">--:--</span>
                    </div>
                </div>
                
                <div class="controls" onclick="event.stopPropagation()">
                    <button class="control-btn" id="minusBtn" aria-label="Subtract">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12l14 0"/>
                        </svg>
                    </button>
                    
                    <button class="control-btn primary" id="saveSessionBtn" aria-label="Save Session">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
                        </svg>
                    </button>
                    
                    <button class="control-btn" id="resetBtn" aria-label="Reset">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4"/>
                            <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- My Counters View -->
        <div class="view" id="countersView">
            <div class="view-header">
                <h2>My Counters</h2>
                <button class="add-counter-btn" id="addCounterBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    New Counter
                </button>
            </div>
            <div class="counters-list" id="countersList"></div>
        </div>
        
        <!-- History View -->
        <div class="view" id="historyView">
            <div class="view-header">
                <h2>History</h2>
                <button class="export-btn" id="exportBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Export
                </button>
            </div>
            <div class="history-list" id="historyList"></div>
        </div>
        
        <!-- Statistics View -->
        <div class="view" id="statsView">
            <div class="view-header">
                <h2>Statistics</h2>
            </div>
            <div class="stats-content" id="statsContent"></div>
        </div>
        
        <!-- Settings View -->
        <div class="view" id="settingsView">
            <div class="view-header">
                <h2>Settings</h2>
            </div>
            <div class="settings-content">
                <div class="setting-group">
                    <h3>Feedback</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="vibrationToggle" checked>
                            <span>Vibration Feedback</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="soundToggle">
                            <span>Sound Effects</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="milestoneVibeToggle" checked>
                            <span>Milestone Vibration (33, 66, 99)</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>Notifications</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notificationsToggle">
                            <span>Enable Notifications</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="targetNotifyToggle">
                            <span>Notify on Target Complete</span>
                        </label>
                    </div>
                    <button class="settings-btn" id="requestNotificationBtn">Request Permission</button>
                </div>
                
                <div class="setting-group">
                    <h3>Display</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="fullscreenToggle">
                            <span>Fullscreen Mode</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>Data</h3>
                    <button class="settings-btn" id="installBtn" style="display: none;">Install App</button>
                    <button class="settings-btn danger" id="clearDataBtn">Clear All Data</button>
                </div>
                
                <div class="setting-group">
                    <h3>About</h3>
                    <p class="version-info">Version 3.0</p>
                    <a href="https://novussolutions.vercel.app" target="_blank" class="branding-link">
                        A product by <img src="https://i.postimg.cc/66mGJsTK/image.png" alt="NOVUS Solutions" class="brand-logo-small">
                    </a>
                </div>
            </div>
        </div>
        
        <!-- 99 Names of Allah View -->
        <div class="view" id="namesView">
            <div class="view-header">
                <h2>99 Names of Allah</h2>
            </div>
            <div class="names-list" id="namesList"></div>
        </div>
        
        <!-- Qibla Finder View -->
        <div class="view" id="qiblaView">
            <div class="view-header">
                <h2>Qibla Finder</h2>
            </div>
            <div class="qibla-content">
                <div class="compass-container">
                    <div class="compass" id="compass">
                        <div class="compass-needle" id="compassNeedle"></div>
                        <div class="compass-direction">N</div>
                    </div>
                    <div class="qibla-info" id="qiblaInfo">
                        <p>Enable location to find Qibla direction</p>
                        <button class="settings-btn" id="enableLocationBtn">Enable Location</button>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 id="modalTitle">Confirm Action</h3>
            <p id="modalMessage">Are you sure?</p>
            <div class="modal-actions">
                <button class="modal-btn cancel" id="modalCancel">Cancel</button>
                <button class="modal-btn confirm" id="modalConfirm">Confirm</button>
            </div>
        </div>
    </div>
    
    <!-- Celebration Animation -->
    <div class="celebration" id="celebration">
        <div class="celebration-text">ğŸ‰ Target Reached! ğŸ‰</div>
    </div>
    
    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>
